(function($){$.fn.xdlines=function(options){var opts=$.extend({},$.fn.xdlines.defaults,options);var $this=$(this);$this.css({wordWrap:"break-word"});var str=$this.text();str=str.replace(/(^\s*)|(\s*$)/g,"");var l=str.length;var txt="";var lineHeight;var linesNum=opts.max;for(var i in str){txt+=str[i];$this.text(txt);var nowh=parseInt($this.css("height"));if(i==0){lineHeight=nowh*linesNum}if(nowh>lineHeight){console.log(txt);var txt=txt.substring(0,txt.length-3)+"...";$this.text(txt);break}}console.log(98765,str)};$.fn.xdlines.defaults={max:1}})(jQuery);